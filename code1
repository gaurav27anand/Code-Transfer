
# Define metrics with descriptions
uptime_metric = metrics.info('app_uptime_seconds', 'Uptime of the Flask app in seconds')
memory_usage_metric = metrics.info('memory_usage_bytes', 'Memory usage of the Flask app in bytes')
hostname_metric = metrics.info('hostname', 'Hostname of the Flask app')

# Track start time for uptime calculation
start_time = time.time()

@app.before_request
def update_metrics():
    """Update uptime and memory usage before each request."""
    uptime = time.time() - start_time
    memory_usage = psutil.Process().memory_info().rss

    # Set metric values
    uptime_metric.set(uptime)
    memory_usage_metric.set(memory_usage)
    hostname_metric.set(hostname)
